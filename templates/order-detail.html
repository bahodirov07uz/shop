{% extends 'base.html' %}
{% block content %}
<title>{% block title %}Buyurtma #{{ order.order_number }}{% endblock %}</title>

<style>
  body { background: #181f2a; color: #fff; }
  .card { background: #21293a; border-radius: 18px; border: none; box-shadow: 0 2px 8px #161b2380; }
  .label { color: #aaa; }
  .value { color: #fff; font-weight: 600; }
  .item { border-bottom: 1px solid #2a3441; padding: 10px 0; }
</style>

<div class="container my-5">
  <div class="card p-4">
    <h2 class="fw-bold mb-4" style="color:#11d560;">Buyurtma #{{ order.order_number }}</h2>

    <div class="row mb-3">
      <div class="col-md-6">
        <div class="label">Holat</div>
        <div class="value">{{ order.get_status_display }}</div>
      </div>
      <div class="col-md-6">
        <div class="label">To?lov holati</div>
        <div class="value">{{ order.payment_status }}</div>
      </div>
    </div>

    <div class="row mb-3">
      <div class="col-md-6">
        <div class="label">Yetkazib berish</div>
        <div class="value">{{ order.get_dynamic_delivery_name }}</div>
      </div>
      <div class="col-md-6">
        <div class="label">Hujjat</div>
        <div class="value">{{ order.get_dynamic_document_name }}</div>
      </div>
    </div>

    <div class="mb-3">
      <div class="label">Manzil</div>
      <div class="value">{{ order.shipping_address|linebreaksbr }}</div>
    </div>

    <h5 class="mt-4" style="color:#11d560;">Mahsulotlar</h5>
    {% for item in order.items.all %}
      <div class="item">
        <div class="value">{{ item.product.name }}</div>
        {% if item.variant %}
        <div class="label">Variant: {{ item.variant.color }} / {{ item.variant.size }} ({{ item.variant.sku }})</div>
        {% endif %}
        <div class="label">Miqdor: {{ item.quantity }} ta</div>
        <div class="label">Narx: ${{ item.price|floatformat:2 }}</div>
      </div>
    {% empty %}
      <p>Mahsulotlar yo?q.</p>
    {% endfor %}

    <div class="mt-4">
      <div class="label">Jami summa</div>
      <div class="value">${{ order.total|floatformat:2 }}</div>
    </div>
  </div>
</div>

{% endblock %}
